<div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
  <strong>Error! </strong> {{ errorMessage }}
  <button type="button" (click)="vanishError()" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<h1 class="alert-heading">Register</h1>
<p></p>
<hr>

<th>Spending this month:</th>
<br>
{{monthlySum}}  €
<br>
<th>Budget:</th>
<br>
{{register.monthlyBudget}}  €
<button type="button" class="btn btn-secondary btn-sm mr-4" (click)="openEditBudgetModal(budgetEditModal)">Edit</button>
<br>
<br>

<th>Bills:</th>

<table class='table'>
  <thead>
  <tr>
    <th>Included: </th>
    <th>Not paid yet: </th>
    <th>Items bought: </th>
    <th>Sum of the purchase: </th>
    <th>To pay per person: </th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let bill of billArray;">
    <td>{{bill.nameList}}</td>
    <td>{{bill.notPaidNameList}}</td>
    <td><div *ngFor="let grocery of bill.groceries">{{grocery.name}}</div></td>
    <td>{{bill.sum}} €</td>
    <td>{{bill.sumPerPerson}} €</td>
    <td>
      <div>
        <button type="button" style="BACKGROUND-COLOR:green;" class="btn btn-secondary" (click)="confirmPayment(bill.id);">Confirm Payment</button>
      </div>
    </td>
  </tr>
  {{this.help}}
  </tbody>
</table>


<div class="row p-2 mb-4">
  <ng-template #budgetEditModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title">Budget</h5>
      <button type="button" class="btn btn-secondary btn-sm mr-4" (click)="modal.dismiss('X')" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="editBudgetForm(budgetForm)" #budgetForm="ngForm">

        <div class="form-group">
          <label for="inputAmount">New Monthly Budget:</label>
          <input type="number" name="amount" class="form-control" id="inputAmount" min="0" required
                 aria-describedby="amountHelp" placeholder="Enter Amount" [(ngModel)]="newMonthlyBudget">
          <div *ngIf="submitted && budgetForm.controls.amount.errors" class="error">
            <small class="form-text text-warning" *ngIf="budgetForm.controls.amount.errors.required"> Budget is
              required!
            </small>
          </div>
        </div>

      </form>
    </div>
    <div class="modal-footer">
      <button type="button" (click)="editBudgetForm(budgetForm)" id="add-msg" class="btn btn-success float-right">Edit Budget
      </button>
      <button type="button" class="btn btn-secondary" id="close-modal-btn" (click)="modal.dismiss('close')">Close
      </button>
    </div>
  </ng-template>
</div>
